import{d as L,e as E,r as f,f as y,g as R,h as w,c as o,a as t,i,u as S,t as d,n as N,F as M,j as $,o as a,k as j,b as A,l as D,w as F,m as B}from"./index-D0LxdbPe.js";const I={class:"min-h-screen bg-gray-50 flex flex-col font-sans"},P={class:"bg-white border-b px-8 py-4 flex justify-between items-center sticky top-0 z-10 shadow-sm"},U={class:"flex items-center gap-4"},z=["src"],T={key:1,class:"w-8 h-8 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-bold"},Y={class:"font-medium text-gray-700"},H={class:"flex-1 p-8 max-w-6xl mx-auto w-full"},O={class:"flex justify-between items-center mb-10"},q=["disabled"],G={key:0},J={key:1},K={key:0,class:"grid grid-cols-1 md:grid-cols-3 gap-6 animate-pulse"},Q={key:1,class:"text-center py-24 bg-white rounded-2xl shadow-sm border border-gray-100"},W={key:2,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"},X={class:"p-5 flex-1 flex flex-col"},Z=["title"],ee={class:"text-xs text-gray-500 mb-4"},te={class:"mt-auto grid grid-cols-2 gap-3"},se=["onClick"],le=L({__name:"DashboardPage",setup(oe){const l=E(),c=S(),n=f([]),x=f(!0),_={FREE:1,PRO:5,PREMIUM:999},g=y(()=>{var e;const s=((e=l.user)==null?void 0:e.plan)||"FREE";return _[s]||1}),u=y(()=>n.value.length<g.value);R(async()=>{try{const s=await w.get("/cv");n.value=s.data}catch(s){console.error(s)}finally{x.value=!1}});const p=()=>{var s;if(!u.value){alert(`You have reached the limit of ${g.value} CVs for your ${((s=l.user)==null?void 0:s.plan)||"FREE"} plan.`);return}c.push("/cv/create")},k=async s=>{if(confirm("Are you sure you want to delete this CV?"))try{await w.delete(`/cv/${s}`),n.value=n.value.filter(e=>e.id!==s)}catch(e){alert("Failed to delete: "+e.message)}},C=()=>c.push("/settings");return(s,e)=>{var b,h,v,m;const V=j("router-link");return a(),o("div",I,[t("nav",P,[t("h1",{class:"font-bold text-2xl bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent cursor-pointer",onClick:e[0]||(e[0]=r=>i(c).push("/dashboard"))},"SmartCV"),t("div",U,[t("div",{class:"flex items-center gap-2 cursor-pointer hover:bg-gray-100 p-2 rounded transition",onClick:C},[(b=i(l).user)!=null&&b.avatarURL?(a(),o("img",{key:0,src:i(l).user.avatarURL,class:"w-8 h-8 rounded-full border"},null,8,z)):(a(),o("div",T,d(((v=(h=i(l).user)==null?void 0:h.name)==null?void 0:v.charAt(0))||"U"),1)),t("span",Y,d((m=i(l).user)==null?void 0:m.name),1)]),t("button",{onClick:e[1]||(e[1]=r=>i(l).logout()),class:"text-sm text-gray-500 hover:text-red-500 transition border-l pl-4"},"Logout")])]),t("main",H,[t("div",O,[e[2]||(e[2]=t("div",null,[t("h2",{class:"text-3xl font-bold text-gray-800"},"My CVs"),t("p",{class:"text-gray-500 mt-1"},"Manage and edit your professional resumes")],-1)),t("button",{onClick:p,disabled:!u.value,class:N(["px-6 py-3 rounded-lg font-bold shadow transition flex items-center gap-2",u.value?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"])},[u.value?(a(),o("span",G,"+ Create New CV")):(a(),o("span",J,"Limit Reached ("+d(n.value.length)+"/"+d(g.value)+")",1))],10,q)]),x.value?(a(),o("div",K,[...e[3]||(e[3]=[t("div",{class:"h-64 bg-gray-200 rounded-xl"},null,-1),t("div",{class:"h-64 bg-gray-200 rounded-xl"},null,-1),t("div",{class:"h-64 bg-gray-200 rounded-xl"},null,-1)])])):n.value.length===0?(a(),o("div",Q,[e[4]||(e[4]=t("div",{class:"text-6xl mb-6"},"ðŸ“„",-1)),e[5]||(e[5]=t("h3",{class:"text-2xl font-bold text-gray-800 mb-2"},"You haven't created any CVs yet.",-1)),e[6]||(e[6]=t("p",{class:"text-gray-500 mb-8 max-w-md mx-auto"},"Start by choosing a professional template and let our AI help you write your perfect resume.",-1)),t("button",{onClick:p,class:"bg-blue-600 text-white px-8 py-3 rounded-lg font-bold hover:bg-blue-700 transition"},"Start Now")])):(a(),o("div",W,[(a(!0),o(M,null,$(n.value,r=>(a(),o("div",{key:r.id,class:"group bg-white rounded-xl shadow-sm border hover:shadow-xl transition-all duration-300 flex flex-col overflow-hidden"},[e[8]||(e[8]=A('<div class="h-48 bg-gray-100 relative overflow-hidden group-hover:scale-105 transition duration-500"><div class="absolute inset-0 flex items-center justify-center text-gray-300"><svg class="w-12 h-12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg></div><div class="absolute top-2 right-2 flex gap-1 actions opacity-0 group-hover:opacity-100 transition"></div></div>',1)),t("div",X,[t("h3",{class:"font-bold text-lg text-gray-800 mb-1 truncate",title:r.title},d(r.title),9,Z),t("p",ee,"Last updated: "+d(new Date(r.updatedAt||Date.now()).toLocaleDateString()),1),t("div",te,[D(V,{to:`/cv/editor/${r.id}`,class:"col-span-2 text-center bg-blue-50 text-blue-600 font-bold py-2 rounded-lg hover:bg-blue-100 transition border border-blue-100"},{default:F(()=>[...e[7]||(e[7]=[B(" Edit ",-1)])]),_:1},8,["to"]),t("button",{onClick:ae=>k(r.id),class:"text-gray-400 hover:text-red-500 text-sm py-2"},"Delete",8,se)])])]))),128))]))])])}}});export{le as default};
