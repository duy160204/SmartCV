import{d as m,e as p,r as f,f as g,C as v,u as h,D as x,c as n,a as t,n as l,l as y,w as b,k as _,o as a,i as w}from"./index-UiFgDuwG.js";const k={class:"min-h-screen flex items-center justify-center bg-gray-50"},P={class:"text-center p-8 bg-white rounded shadow-lg"},C={key:0,class:"animate-pulse"},R={key:1},I={key:2},A=m({__name:"PaymentReturnPage",setup(N){const u=v(),i=h(),c=p(),s=f("processing");let o=null;return g(async()=>{if(u.query.vnp_ResponseCode==="00"){s.value="processing";let e=5;o=setInterval(async()=>{try{await c.checkAuth()}catch(r){console.error("Auth check failed:",r)}e--,e<=0&&(o&&clearInterval(o),s.value="success",setTimeout(()=>i.push("/dashboard"),2e3))},1e3)}else s.value="failed"}),x(()=>{o&&(clearInterval(o),o=null)}),(d,e)=>{const r=_("router-link");return a(),n("div",k,[t("div",P,[s.value==="processing"?(a(),n("div",C,[...e[0]||(e[0]=[t("h1",{class:"text-2xl font-bold mb-2"},"Processing Payment...",-1),t("p",null,"Please wait while we confirm your subscription.",-1)])])):l("",!0),s.value==="success"?(a(),n("div",R,[...e[1]||(e[1]=[t("h1",{class:"text-2xl font-bold mb-2 text-green-600"},"Upgrade Successful!",-1),t("p",null,"Redirecting to dashboard...",-1)])])):l("",!0),s.value==="failed"?(a(),n("div",I,[e[3]||(e[3]=t("h1",{class:"text-2xl font-bold mb-2 text-red-600"},"Payment Failed",-1)),e[4]||(e[4]=t("p",{class:"mb-4"},"Something went wrong. Please try again.",-1)),y(r,{to:"/",class:"bg-gray-800 text-white px-4 py-2 rounded"},{default:b(()=>[...e[2]||(e[2]=[w("Go Home",-1)])]),_:1})])):l("",!0)])])}}});export{A as default};
