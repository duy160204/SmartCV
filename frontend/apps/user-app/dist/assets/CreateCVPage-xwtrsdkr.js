import{d as V,r as c,f as F,g as u,s as T,c as a,a as o,l as N,w as R,k as j,p as h,v as S,x as U,F as B,j as E,i as y,t as v,y as m,u as P,o as l,n as $}from"./index-UiFgDuwG.js";const L={class:"min-h-screen bg-gray-50 p-8"},M={class:"max-w-6xl mx-auto"},q={class:"flex items-center mb-8"},z={class:"bg-white p-6 rounded shadow mb-8"},D={class:"flex justify-between items-center mb-4"},I={class:"flex items-center gap-2 text-sm cursor-pointer"},O={key:0},A={key:1,class:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-4 gap-6"},G=["onClick"],H=["onClick"],J={class:"aspect-[210/297] bg-gray-200 mb-4 rounded overflow-hidden relative"},K=["src"],Q={key:1,class:"flex items-center justify-center h-full text-gray-400"},W={key:2,class:"absolute top-2 right-2 bg-yellow-400 text-yellow-900 text-xs font-bold px-2 py-1 rounded"},X={class:"font-bold text-center"},Y={class:"fixed bottom-0 left-0 right-0 p-4 bg-white border-t flex justify-between items-center px-10 shadow-lg"},Z={class:"text-gray-500"},ee={key:0,class:"font-bold text-blue-600"},te={key:1},se=["disabled"],le=V({__name:"CreateCVPage",setup(oe){const _=P(),p=c([]),d=c([]),x=c(!0),n=c(null),b=c("Untitled CV"),f=c(!1);F(async()=>{try{const[s,e]=await Promise.all([u.get("/templates"),u.get("/cv/favorites")]);p.value=s.data,d.value=e.data}catch(s){console.error(s)}finally{x.value=!1}});const g=s=>d.value.some(e=>e.templateId===s),w=async(s,e)=>{var r,t;e.stopPropagation();try{g(s)?(await u.delete(`/cv/template/${s}/favorite`),d.value=d.value.filter(i=>i.templateId!==s)):(await u.post(`/cv/template/${s}/favorite`),d.value.push({templateId:s}))}catch(i){alert("Failed to update favorite: "+(((t=(r=i.response)==null?void 0:r.data)==null?void 0:t.message)||i.message))}},k=T(()=>{if(f.value){const s=d.value.map(e=>e.templateId);return p.value.filter(e=>s.includes(e.id))}return p.value}),C=async()=>{var s,e;if(n.value)try{const r=await u.post("/cv",{title:b.value,templateId:n.value,content:{profile:{name:"",summary:""},education:[],experience:[],skills:[]}});_.push(`/cv/editor/${r.data.id}`)}catch(r){alert("Failed to create: "+(((e=(s=r.response)==null?void 0:s.data)==null?void 0:e.message)||r.message))}};return(s,e)=>{const r=j("router-link");return l(),a("div",L,[o("div",M,[o("div",q,[N(r,{to:"/",class:"text-gray-500 mr-4"},{default:R(()=>[...e[2]||(e[2]=[y("‚Üê Back",-1)])]),_:1}),e[3]||(e[3]=o("h1",{class:"text-3xl font-bold"},"Create New CV",-1))]),o("div",z,[e[4]||(e[4]=o("label",{class:"block font-bold mb-2"},"CV Title",-1)),h(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>b.value=t),class:"w-full border p-2 rounded text-lg",placeholder:"e.g. Software Engineer 2024"},null,512),[[S,b.value]])]),o("div",D,[e[6]||(e[6]=o("h2",{class:"text-xl font-bold"},"Select a Template",-1)),o("label",I,[h(o("input",{type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=t=>f.value=t),class:"form-checkbox"},null,512),[[U,f.value]]),e[5]||(e[5]=o("span",null,"Show Favorites Only",-1))])]),x.value?(l(),a("div",O,"Loading templates...")):(l(),a("div",A,[(l(!0),a(B,null,E(k.value,t=>(l(),a("div",{key:t.id,onClick:i=>n.value=t.id,class:m(["border-2 rounded p-4 cursor-pointer transition relative",n.value===t.id?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300 bg-white"])},[o("button",{onClick:i=>w(t.id,i),class:m(["absolute top-2 left-2 z-10 text-2xl transition",g(t.id)?"text-red-500":"text-gray-300 hover:text-red-300"])},v(g(t.id)?"‚ù§Ô∏è":"ü§ç"),11,H),o("div",J,[t.thumbnailUrl?(l(),a("img",{key:0,src:t.thumbnailUrl,class:"w-full h-full object-cover"},null,8,K)):(l(),a("div",Q,"Preview")),t.planRequired!=="FREE"?(l(),a("div",W,v(t.planRequired),1)):$("",!0)]),o("h3",X,v(t.name),1)],10,G))),128))])),o("div",Y,[o("div",Z,[e[7]||(e[7]=y(" Selected: ",-1)),n.value?(l(),a("span",ee,"Template #"+v(n.value),1)):(l(),a("span",te,"None"))]),o("button",{onClick:C,disabled:!n.value,class:m(["px-8 py-3 rounded font-bold text-white",n.value?"bg-blue-600 hover:bg-blue-700":"bg-gray-300 cursor-not-allowed"])}," Create CV ",10,se)])])])}}});export{le as default};
