import{d as h,e as v,r as d,g as x,C as m,u as p,c as r,a as e,q as y,t as f,o as a}from"./index-DLU9CfYJ.js";const w={class:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100"},k={class:"bg-white p-8 rounded-xl shadow-lg max-w-md w-full text-center"},A={key:0},_={key:1},C={key:2},O={class:"text-gray-600 mb-6"},q=h({__name:"OAuthCallbackPage",setup(S){const n=m(),u=p(),s=v(),o=d("loading"),l=d("");x(async()=>{const i=n.query.status,t=n.params.provider||"unknown";if(console.log("[OAuth Callback] Provider:",t,"Status:",i),i!=="success"){o.value="error",l.value=n.query.error||"OAuth authentication failed";return}try{if(o.value="loading",await s.checkAuth(),s.isAuthenticated&&s.user)console.log("[OAuth Callback] Auth verified, user:",s.user.email),o.value="success",setTimeout(()=>{u.replace("/dashboard")},500);else throw new Error("Authentication verified but user data not available")}catch(c){console.error("[OAuth Callback] Error:",c),o.value="error",l.value=c.message||"Failed to complete authentication"}});const g=()=>{u.push("/login")},b=()=>{window.location.reload()};return(i,t)=>(a(),r("div",w,[e("div",k,[o.value==="loading"?(a(),r("div",A,[...t[0]||(t[0]=[e("div",{class:"animate-spin w-12 h-12 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"},null,-1),e("h2",{class:"text-xl font-bold text-gray-800 mb-2"},"Authenticating...",-1),e("p",{class:"text-gray-500"},"Please wait while we verify your login.",-1)])])):o.value==="success"?(a(),r("div",_,[...t[1]||(t[1]=[e("div",{class:"text-5xl mb-4"},"✅",-1),e("h2",{class:"text-xl font-bold text-green-600 mb-2"},"Login Successful!",-1),e("p",{class:"text-gray-500"},"Redirecting to dashboard...",-1)])])):o.value==="error"?(a(),r("div",C,[t[2]||(t[2]=e("div",{class:"text-5xl mb-4"},"❌",-1)),t[3]||(t[3]=e("h2",{class:"text-xl font-bold text-red-600 mb-2"},"Authentication Failed",-1)),e("p",O,f(l.value),1),e("div",{class:"flex gap-3 justify-center"},[e("button",{onClick:b,class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition"}," Try Again "),e("button",{onClick:g,class:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition"}," Back to Login ")])])):y("",!0)])]))}});export{q as default};
