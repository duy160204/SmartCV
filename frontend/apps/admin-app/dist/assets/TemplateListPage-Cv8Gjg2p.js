import{d as _,j as p,k as h,z as c,c as n,a,e as b,w as g,f as k,t as u,F as w,r as E,o,n as C,g as f}from"./index-DhSIbSTO.js";const T={class:"p-8"},$={class:"flex justify-between items-center mb-6"},N={key:0,class:"text-center py-12"},j={key:1,class:"bg-red-50 border border-red-200 text-red-700 p-6 rounded text-center"},D={class:"text-sm"},F={key:2,class:"bg-gray-50 p-8 text-center rounded"},P={key:3,class:"grid grid-cols-1 md:grid-cols-3 gap-6"},L={class:"h-40 bg-gray-100 flex items-center justify-center mb-4 overflow-hidden relative group"},B=["src"],U={key:1,class:"text-gray-400"},V={class:"font-bold font-lg"},z={class:"text-sm text-gray-500 mb-2"},M={class:"flex gap-2 flex-wrap"},R=["onClick"],q=["onClick"],S=["onClick"],H=_({__name:"TemplateListPage",setup(A){const r=p([]),m=p(!0),i=p(null);h(async()=>{var l,t;try{m.value=!0,i.value=null;const s=await c.get("/admin/templates");r.value=s.data.data||[]}catch(s){console.error(s),i.value=((t=(l=s.response)==null?void 0:l.data)==null?void 0:t.message)||s.message||"Failed to load templates"}finally{m.value=!1}});const v=async l=>{var t,s;try{await c.put(`/admin/templates/${l}/enable`);const e=r.value.find(d=>d.id===l);e&&(e.isEnabled=!0),alert("Template enabled")}catch(e){alert("Error: "+(((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||e.message))}},x=async l=>{var t,s;try{await c.put(`/admin/templates/${l}/disable`);const e=r.value.find(d=>d.id===l);e&&(e.isEnabled=!1),alert("Template disabled")}catch(e){alert("Error: "+(((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||e.message))}},y=async l=>{var t,s;if(confirm("Delete this template permanently?"))try{await c.delete(`/admin/templates/${l}`),r.value=r.value.filter(e=>e.id!==l),alert("Template deleted")}catch(e){alert("Error: "+(((s=(t=e.response)==null?void 0:t.data)==null?void 0:s.message)||e.message))}};return(l,t)=>{const s=k("router-link");return o(),n("div",T,[a("div",$,[t[1]||(t[1]=a("h1",{class:"text-2xl font-bold"},"Template Management",-1)),b(s,{to:"/templates/create",class:"bg-blue-600 text-white px-4 py-2 rounded"},{default:g(()=>[...t[0]||(t[0]=[f("Create New",-1)])]),_:1})]),m.value?(o(),n("div",N,[...t[2]||(t[2]=[a("div",{class:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"},null,-1),a("p",{class:"text-gray-500"},"Loading templates...",-1)])])):i.value?(o(),n("div",j,[t[3]||(t[3]=a("p",{class:"font-bold mb-2"},"Failed to load templates",-1)),a("p",D,u(i.value),1)])):r.value.length===0?(o(),n("div",F,[t[5]||(t[5]=a("p",{class:"text-gray-500 mb-4"},"No templates found",-1)),b(s,{to:"/templates/create",class:"text-blue-600 hover:underline"},{default:g(()=>[...t[4]||(t[4]=[f("Create your first template",-1)])]),_:1})])):(o(),n("div",P,[(o(!0),n(w,null,E(r.value,e=>(o(),n("div",{key:e.id,class:"bg-white p-4 border rounded shadow"},[a("div",L,[e.thumbnailUrl?(o(),n("img",{key:0,src:e.thumbnailUrl,alt:"Preview",class:"w-full h-full object-cover"},null,8,B)):(o(),n("span",U,"No Preview")),t[6]||(t[6]=a("div",{class:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-10 transition-all flex items-center justify-center"},null,-1))]),a("h3",V,u(e.name||"Untitled"),1),a("p",z,"Plan: "+u(e.planRequired||"FREE"),1),a("p",{class:C(["text-xs mb-3",e.isEnabled!==!1?"text-green-600":"text-red-600"])},u(e.isEnabled!==!1?"Enabled":"Disabled"),3),a("div",M,[b(s,{to:`/templates/${e.id}`,class:"text-blue-600 hover:underline text-sm font-medium"},{default:g(()=>[...t[7]||(t[7]=[f("Edit / Preview",-1)])]),_:1},8,["to"]),e.isEnabled!==!1?(o(),n("button",{key:0,onClick:d=>x(e.id),class:"text-yellow-600 hover:underline text-sm"},"Disable",8,R)):(o(),n("button",{key:1,onClick:d=>v(e.id),class:"text-green-600 hover:underline text-sm"},"Enable",8,q)),a("button",{onClick:d=>y(e.id),class:"text-red-600 hover:underline text-sm"},"Delete",8,S)])]))),128))]))])}}});export{H as default};
