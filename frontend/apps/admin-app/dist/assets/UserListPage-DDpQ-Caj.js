import{d as x,j as p,k,c as o,a as e,t as n,F as m,r as h,z as g,o as a,n as _}from"./index-DhSIbSTO.js";const y={class:"p-8"},v={key:0,class:"text-center py-12"},f={key:1,class:"bg-red-50 border border-red-200 text-red-700 p-6 rounded text-center"},C={class:"text-sm"},w={key:2,class:"bg-gray-50 p-8 text-center rounded"},L={key:3,class:"bg-white rounded shadow text-sm"},A={class:"w-full text-left border-collapse"},F={class:"p-4"},E={class:"p-4 font-medium"},U={class:"p-4"},$={class:"px-2 py-1 bg-blue-50 text-blue-700 rounded text-xs font-bold"},B={class:"p-4"},N={class:"p-4"},z={class:"p-4"},D={class:"p-4 flex gap-2"},M=["onClick"],P=["onClick"],V=x({__name:"UserListPage",setup(R){const c=p([]),i=p(!0),r=p(null),u=async()=>{var l,s;try{i.value=!0,r.value=null;const t=await g.get("/admin/users");c.value=t.data||[]}catch(t){console.error(t),r.value=((s=(l=t.response)==null?void 0:l.data)==null?void 0:s.message)||t.message||"Failed to load users"}finally{i.value=!1}};k(()=>{u()});const b=async l=>{var s,t;try{const d=l.locked?"unlock":"lock";await g.put(`/admin/users/${l.id}/${d}`),l.locked=!l.locked}catch(d){alert("Action failed: "+(((t=(s=d.response)==null?void 0:s.data)==null?void 0:t.message)||d.message))}};return(l,s)=>(a(),o("div",y,[s[4]||(s[4]=e("h1",{class:"text-2xl font-bold mb-6"},"User Management",-1)),i.value?(a(),o("div",v,[...s[0]||(s[0]=[e("div",{class:"animate-spin w-8 h-8 border-4 border-blue-600 border-t-transparent rounded-full mx-auto mb-4"},null,-1),e("p",{class:"text-gray-500"},"Loading users...",-1)])])):r.value?(a(),o("div",f,[s[1]||(s[1]=e("p",{class:"font-bold mb-2"},"Failed to load users",-1)),e("p",C,n(r.value),1),e("button",{onClick:u,class:"mt-4 text-blue-600 underline"},"Retry")])):c.value.length===0?(a(),o("div",w,[...s[2]||(s[2]=[e("p",{class:"text-gray-500"},"No users found",-1)])])):(a(),o("div",L,[e("table",A,[s[3]||(s[3]=e("thead",null,[e("tr",{class:"border-b bg-gray-50"},[e("th",{class:"p-4"},"ID"),e("th",{class:"p-4"},"Email"),e("th",{class:"p-4"},"Plan"),e("th",{class:"p-4"},"Verified"),e("th",{class:"p-4"},"Status"),e("th",{class:"p-4"},"Created At"),e("th",{class:"p-4"},"Actions")])],-1)),e("tbody",null,[(a(!0),o(m,null,h(c.value,t=>(a(),o("tr",{key:t.id,class:"border-b hover:bg-gray-50"},[e("td",F,n(t.id),1),e("td",E,n(t.email),1),e("td",U,[e("span",$,n(t.plan||"FREE"),1)]),e("td",B,[e("span",{class:_(t.verified?"text-green-600":"text-gray-400")},n(t.verified?"Yes":"No"),3)]),e("td",N,[e("span",{class:_(["px-2 py-1 rounded text-xs",t.locked?"bg-red-100 text-red-800":"bg-green-100 text-green-800"])},n(t.locked?"Locked":"Active"),3)]),e("td",z,n(t.createdAt||"-"),1),e("td",D,[t.locked?(a(),o("button",{key:0,onClick:d=>b(t),class:"text-green-600 hover:underline"},"Unlock",8,M)):(a(),o("button",{key:1,onClick:d=>b(t),class:"text-yellow-600 hover:underline"},"Lock",8,P))])]))),128))])])]))]))}});export{V as default};
