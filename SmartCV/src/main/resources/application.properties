# ===================== Ứng dụng và server =====================
spring.application.name=SmartCV
server.port=8080

# Kích hoạt profile local
spring.profiles.active=local

# ===================== MySQL =====================
spring.datasource.url=jdbc:mysql://localhost:3306/SmartCV?useSSL=false&serverTimezone=Asia/Ho_Chi_Minh&allowPublicKeyRetrieval=true
spring.datasource.username=smartcv
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# ===================== JPA / Hibernate =====================
spring.jpa.database-platform=org.hibernate.dialect.MySQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.open-in-view=false

# Prevent warning "Cannot deserialize session attribute" on devtools restart
server.servlet.session.persistent=false

# ===================== OPENAI =====================
ai.openai.enabled=false
ai.openai.api-key=${OPENAI_API_KEY}
ai.openai.base-url=https://api.openai.com/v1
ai.openai.model=gpt-4o-mini

# ===================== GEMINI (GOOGLE) =====================
ai.gemini.enabled=true
ai.gemini.api-key=${GEMINI_API_KEY}
ai.gemini.model=gemini-2.0-flash


# ===================== LOGGING =====================
logging.level.org.springframework.security.oauth2=DEBUG
logging.level.org.springframework.security.web.authentication=DEBUG

# ===================== STANDARD SPRING OAUTH2 =====================
# Google
spring.security.oauth2.client.registration.google.client-id=${OAUTH_GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${OAUTH_GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.scope=openid,profile,email
spring.security.oauth2.client.registration.google.redirect-uri=http://localhost:8080/api/login/oauth2/code/google

# GitHub
spring.security.oauth2.client.registration.github.client-id=${OAUTH_GITHUB_CLIENT_ID}
spring.security.oauth2.client.registration.github.client-secret=${OAUTH_GITHUB_CLIENT_SECRET}
spring.security.oauth2.client.registration.github.scope=read:user,user:email
spring.security.oauth2.client.registration.github.redirect-uri=http://localhost:8080/api/login/oauth2/code/github

# Facebook
spring.security.oauth2.client.registration.facebook.client-id=${OAUTH_FACEBOOK_CLIENT_ID}
spring.security.oauth2.client.registration.facebook.client-secret=${OAUTH_FACEBOOK_CLIENT_SECRET}
spring.security.oauth2.client.registration.facebook.scope=public_profile,email
spring.security.oauth2.client.registration.facebook.redirect-uri=http://localhost:8080/api/login/oauth2/code/facebook

# LinkedIn (Custom Provider)
spring.security.oauth2.client.registration.linkedin.client-id=${OAUTH_LINKEDIN_CLIENT_ID}
spring.security.oauth2.client.registration.linkedin.client-secret=${OAUTH_LINKEDIN_CLIENT_SECRET}
spring.security.oauth2.client.registration.linkedin.scope=openid,profile,email
spring.security.oauth2.client.registration.linkedin.client-authentication-method=client_secret_post
spring.security.oauth2.client.registration.linkedin.authorization-grant-type=authorization_code
spring.security.oauth2.client.registration.linkedin.redirect-uri=http://localhost:8080/api/login/oauth2/code/linkedin
spring.security.oauth2.client.provider.linkedin.authorization-uri=https://www.linkedin.com/oauth/v2/authorization
spring.security.oauth2.client.provider.linkedin.token-uri=https://www.linkedin.com/oauth/v2/accessToken
spring.security.oauth2.client.provider.linkedin.user-info-uri=https://api.linkedin.com/v2/userinfo
spring.security.oauth2.client.provider.linkedin.user-name-attribute=sub

# ===================== MANUAL OAUTH (ZALO ONLY) =====================
oauth.zalo.client-id=${OAUTH_ZALO_CLIENT_ID}
oauth.zalo.client-secret=${OAUTH_ZALO_CLIENT_SECRET}
oauth.zalo.redirect-uri=http://localhost:8080/auth/oauth/zalo/callback
oauth.zalo.scope=basic

# ===================== MAIL (SMTP) =====================
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true

# ===================== VNPAY =====================
vnpay.tmn-code=${VNPAY_TMN_CODE}
vnpay.hash-secret=${VNPAY_HASH_SECRET}
vnpay.pay-url=https://sandbox.vnpayment.vn/paymentv2/vpcpay.html
vnpay.return-url=http://localhost:8080/api/payments/vnpay/return

# ===================== JWT =====================
jwt.secret=${JWT_SECRET}
jwt.expiration-ms=${JWT_EXPIRATION_MS:86400000}
# Cookie secure flag (false for dev, true for prod via env)
app.security.cookie-secure=${APP_COOKIE_SECURE:false}

# ===================== CORS =====================
app.cors.allowed-origins=${APP_CORS_ALLOWED_ORIGINS:http://localhost:3000,http://localhost:3001}

# ===================== FRONTEND =====================
app.frontend.url=${APP_FRONTEND_URL:http://localhost:3000}
